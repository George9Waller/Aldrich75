{% extends "base.html" %}

{% block title %}Aldrich 75{% endblock %}

{% block head %}
    {% block meta %}
        {{ super() }}
    {% endblock %}

    {% block styles %}
        {{ super() }}
    {% endblock %}
{% endblock %}


{% block body %}
    {% block content %}

        {% block messages %}
            {{ super() }}
        {% endblock %}

        <header>
            <div class="heading" style="padding: 20px">
                <div style="padding-left: 10%; padding-top: 10px; position: absolute">
                    <p class="bold" style="font-size: 60px">Aldrich 75</p>
                    <p style="font-weight: 400"><span style="font-weight: 500; font-size: 30px">#my75</span> is a campaign to raise money for <span style="border-bottom: solid 3px #dd7a34"><a href="https://www.prevent-suicide.org.uk" target="_blank" style="color: white">Grassroots Suicide Prevention</a></span>, <span style="border-bottom: solid 3px #8dc558"><a href="https://amazesussex.org.uk/" target="_blank" style="color: white">Amaze</a></span> & <span style="border-bottom: solid 3px #3b4587"><a href="https://www.buglife.org.uk/" target="_blank" style="color: white">Buglife</a></span>...</p>
                </div>
                <div style="right: 10%; padding-top: 10px; position: absolute">
                    <img style="height: 100px" alt="Aldrich Logo" src="/static/img/Aldrich_logo.png">
                </div>
            </div>
        </header>

        <div class="progress" style="height: 40px">
            <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar" aria-valuenow="{{ progress }}" aria-valuemin="0" aria-valuemax="100" style="width: {{ progress }}%; height: 40px">£{{ total|int }} / £7500</div>
        </div>

        <div class="section">
            <h2>Info</h2>

            {% if not authenticated %}
                <div class="alert alert-primary">Please enter the password to view the fully featured page: <b><a href="{{ url_for('login') }}">login</a></b></div>
            {% endif %}

            <div style="display: flex; flex-flow: row wrap">

                <div class="stat-element" style="background: #dd7a34; color: black">
                    <p style="font-size: medium" class=""><b>Grassroots Suicide Prevention</b></p>
                    <p style="font-size: small; margin-bottom: 0; text-align: justify">They work locally and nationally to arm people with the skills to effectively support someone at risk of suicide. Their work helps save lives by enabling the kind of conversations that can really make a difference.</p>
                    <a href="https://www.prevent-suicide.org.uk" target="_blank" style="font-size: small; color: white">Read more...</a>
                </div>

                <div class="stat-element" style="background: #8dc558; color: black">
                    <p style="font-size: medium" class=""><b>Amaze</b></p>
                    <p style="font-size: small; margin-bottom: 0; text-align: justify">Amaze gives information, advice and support services to families of children and young people with special educational needs and disabilities in Brighton & Hove and Sussex to build their confidence, knowledge, skills and resilience.</p>
                    <a href="https://amazesussex.org.uk/" target="_blank" style="font-size: small; color: white">Read more...</a>
                </div>

                <div class="stat-element" style="background: #3b4587; color: white">
                    <p style="font-size: medium" class=""><b>Buglife</b></p>
                    <p style="font-size: small; margin-bottom: 0; text-align: justify">Buglife has a wealth of practical conservation work predominantly within the UK. With so many species to choose from Buglife has to prioritise work areas meaning that the current focus is predominantly on pollinators and freshwater habitats.</p>
                    <a href="https://www.buglife.org.uk/" target="_blank" style="font-size: small; color: #8dc558">Read more...</a>
                </div>

                <div class="stat-element" style="background: #28a745; color: white">
{#                    <span class="d-inline-block" data-toggle="popover" data-content="Donation coming soon">#}
                        <a class="btn btn-success btn-lg" style="" href="/donate/{{ support_challenge_id }}">Click here to support this campaign</a>
{#                    </span>#}
                </div>

                <div class="stat-element" style="background: {{ days_colour }}; color: black">
                    <p class="text-center"><b>{{ days }}</b></p>
                    <p style="font-size: small; margin-bottom: 0">{{ days_text }}</p>
                </div>

                <div class="stat-element">
                    <p class="text-center"><b>£{{ '%0.2f' % total|float }}</b></p>
                    <p style="font-size: small; margin-bottom: 0">Total raised</p>
                </div>

                <div class="stat-element">
                    <p class="text-center"><b>{{ met_challenges }}</b></p>
                    <p style="font-size: small; margin-bottom: 0">Challenges meeting £75 target</p>
                </div>

                {% if authenticated and days_text != 'Days until start' %}
                    {% if challenge1 %}
                        <div class="stat-element">
                            <p class="text-center" style="font-size: x-large"><b>1. {{ challenge1.Title }}</b></p>
                            <p style="font-size: small; margin-bottom: 0">£{{ '%0.2f' % challenge1.MoneyRaised|float }}</p>
                            <p style="font-size: small; margin-bottom: 0">By: {{ challenge1.Participant.Name }}</p>
                        </div>
                    {% endif %}
                    {% if challenge2 %}
                        <div class="stat-element">
                            <p class="text-center" style="font-size: x-large"><b>2. {{ challenge2.Title }}</b></p>
                            <p style="font-size: small; margin-bottom: 0">£{{ '%0.2f' % challenge2.MoneyRaised|float }}</p>
                            <p style="font-size: small; margin-bottom: 0">By: {{ challenge2.Participant.Name }}</p>
                        </div>
                    {% endif %}
                    {% if challenge3 %}
                        <div class="stat-element" style="font-size: x-large">
                            <p class="text-center"><b>3. {{ challenge3.Title }}</b></p>
                            <p style="font-size: small; margin-bottom: 0">£{{ '%0.2f' % challenge3.MoneyRaised|float }}</p>
                            <p style="font-size: small; margin-bottom: 0">By: {{ challenge3.Participant.Name }}</p>
                        </div>
                    {% endif %}
                {% elif not authenticated and days_text != 'Days until start' %}
                    <div class="stat-element" style="background: black; color: white">
                    <p class="text-center" style="font-size: medium"><i class="fas fa-lock"></i> Login required for leaderboard</p>
                </div>
                {% endif %}

            </div>
        </div>

        <div class="section">
            <h2>Challenges</h2>

            <div style="display: flex; flex-flow: row wrap">

                {% for challenge in challenges %}
                    <div class="card" style="width: 18rem;">
                        {% if challenge.URL != '' %}
                            {% if authenticated %}
                                <iframe width="300" height="200" src="{{ challenge.URL }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            {% else %}
                                <div class="card-img-top" style="background: rgba(0, 0, 0, 200); width: 100%; height: 200px">
                                    <p style="color: white" class="text-center"><i class="fas fa-lock"></i> Login required for videos</p>
                                </div>
                            {% endif %}
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title">{{ challenge.Title }}</h5>
                            <h6 class="card-subtitle mb-2 text-muted">{{ challenge.Participant.Name }}</h6>
                            <p class="card-text">{{ challenge.Description }}</p>
                            <p><b>Raised: £{{ '%0.2f' % challenge.MoneyRaised|float }}</b></p>

{#                            <span class="d-inline-block" data-toggle="popover" data-content="Donation coming soon">#}
                                <a class="btn btn-primary" style="" href="/donate/{{ challenge.id }}">Donate</a>
{#                            </span>#}

                            {% if authenticated %}
                                {% if challenge.id in my_challenges %}
                                    <a href="/admin/edit/challenge/{{ challenge.id }}" class="btn btn-dark">Edit</a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}

                {% if authenticated %}
                    <div class="card" style="width: 18rem;">
                      <div class="card-body">
                        <h5 class="card-title">Add challenge</h5>
                        <a href="{{ url_for('create_challenge') }}" class="btn btn-primary">Add challenge</a>
                      </div>
                    </div>
                {% endif %}

            </div>
        </div>


            <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Aldrich 75</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                      <h6>What we are doing:</h6>
                      <p>We are celebrating the 75th birthday of Aldrich House by raising money for our three house charities. But it is not only 75th birthday but also 75 years since the end of the second world war and 75 years of the United Nations.</p>
                      <p>We invite you to donate to any of the challenges on this site or even create a challenge of your own.</p>
                      <br>
                      <h6>How to participate:</h6>
                      <ol>
                          <li>Create a challenge with a goal related to 75 e.g. bake 75 cakes</li>
                          <li>Get family, friends or anyone to sponsor your campaign by visiting this site and donating</li>
                      </ol>
                      <br>
                      <p>Alternatively you can just donate to challenge(s) of your choice or the campaign as a whole</p>
                  </div>
                  <div class="modal-footer">
                      <small>You are seeing this because we think this is your first time on the site (or at least just on this browser)</small>
                  </div>
                </div>
              </div>
            </div>

        {% if popup == False %}
            <script type="text/javascript">
                $(window).on('load',function(){
                    $('#exampleModalCenter').modal('show');
                });
            </script>
        {% endif %}

        <script>
            $(function () {
              $('[data-toggle="popover"]').popover()
            })
        </script>
        <script>
            $(function () {
              $('[data-toggle="tooltip"]').tooltip()
            })
        </script>
    {% endblock %}

    {% block scripts %}
        {{ super() }}
    {% endblock %}

    {% block footer %}
        {{ super() }}
    {% endblock %}
{% endblock %}